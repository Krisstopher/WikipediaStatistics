# Wikipedia Statistics

Программа реализует многопоточный подсчёт статистики русскоязычных статей.

## Исходные данные

Программа получает на вход либо скачанные .bz2 архивы с XML-дампами статей, либо дату статей в формате year-month-day без разделителей (прим. `20220120`) по параметру `--date`. 

Пример статьи (тэг `page`):

```(xml)
<mediawiki
    xmlns="http://www.mediawiki.org/xml/export-0.10/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.10/
    http://www.mediawiki.org/xml/export-0.10.xsd" version="0.10" xml:lang="ru">
  ...
  <page>
    <title>Базовая статья</title>
    <ns>0</ns>
    <id>4</id>
    <redirect title="Заглавная страница" />
    <restrictions>sysop</restrictions>
    <revision>
      <id>237414</id>
      <parentid>22491</parentid>
      <timestamp>2004-08-09T04:36:57Z</timestamp>
      <contributor>
        <username>Maximaximax</username>
        <id>450</id>
      </contributor>
      <comment>redir</comment>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="49" xml:space="preserve">#REDIRECT [[Заглавная страница]]</text>
      <sha1>fv75zcmgjvd2h4rn3jqc0yrlf07afkh</sha1>
    </revision>
  </page>
  ...   
```

### Статистика

Русскими будем считаются слова, состоящие из трёх и более русских букв - `[а-яA-Z]{3,}`, без учёта регистра. Всё остальное - разделители.
Разные формы слова считаются разными словами.

1. Топ-300 русских слов наиболее часто встречающихся в названиях статей. `page/title`
   При равном количестве упорядочить по алфавиту.

   Формат:

    ```
    Топ-300 слов в заголовках статей:
    <Число вхождений><пробел><Слово>
    ...
    ```

2. Топ-300 русских слов наиболее часто встречающихся в самих статьях. `page/revision/text`
   При равном количестве упорядочить по алфавиту.

   Формат:

    ```
    Топ-300 слов в статьях:
    <Число вхождений><пробел><Слово>
    ...
    ```

3. Распределение статей по размеру (логарифмическая шкала) `page/revision/text@bytes`

   Формат:

    ```
    Распределение статей по размеру:
    0<пробел><Количество статей размером 0-9 байт>
    1<пробел><Количество статей размером 10-99 байт>
    2<пробел><Количество статей размером 100-999 байт>
    ...
    ```

   В первой и последней строке не должно быть количество 0.
   В остальных строках может быть 0, если подходящих статей нет.

4. Распределение статей по времени `page/revision/timestamp`

   Формат:

    ```
    Распределение статей по времени:
    <год YYYY><пробел><Количество статей в году>
    ...
    ```
   В первой и последней строке не должно быть количество 0.
   В остальных строках может быть 0, если подходящих статей нет.

#### Пример
XML на входе

```(xml)
<mediawiki xml:lang="ru">
    <page>
        <title>Простой заголовок</title>
        <revision>
            <timestamp>2021-11-11T14:14:14Z</timestamp>
            <text bytes="26">Простой текст</text>
        </revision>
    </page>
</mediawiki>
```

Результат на выходе

```
Топ-300 слов в заголовках статей:
1 заголовок
1 простой

Топ-300 слов в статьях:
1 простой
1 текст

Распределение статей по размеру:
0 0
1 1

Распределение статей по времени:
2021 1

```
### Параметры входных данных

Параметр `--threads` отвечает за число потоков.
Программа принимает на вход один или несколько bzip2-файлов (параметры `--input`), разделённых запятыми.
Программа записывает в файл отчёт со статистикой (параметр `--output`).

### Тесты

Программа имеет Unit-тесты для подсчёта статистики и несколько тестов для проверки работоспособности.
